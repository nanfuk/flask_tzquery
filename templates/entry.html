<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>传输台账查询</title>
<meta name="description" content="">
<meta name="keywords" content="">
<link rel="stylesheet" type="text/css" href="static/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="static/css/sticky-footer.css">
<link rel="stylesheet" type="text/css" href="static/easyui/themes/default/easyui.css">
<link rel="stylesheet" type="text/css" href="static/easyui/themes/icon.css">
<script type="text/javascript" src="static/js/jquery-2.1.1.min.js"></script>
<script type="text/javascript" src="static/js/json2.js"></script>
<script type="text/javascript" src="static/js/bootstrap.min.js"></script>
<script type="text/javascript" src="static/easyui/jquery.easyui.min.js"></script>
<script type="text/javascript" src="static/easyui/jquery.edatagrid.js"></script>
<script type="text/javascript" src="static/easyui/datagrid-filter.js"></script>
<script type="text/javascript" src="static/js/underscore-min.js"></script>
<script src="static/js/jquery.cookie.js"></script>
<!--<script type="text/javascript">
	$(function(){
		//$("#client").panel();
		//$("#client").panel("move",{left:300,top:400});
		var dg = $("#client-210").datagrid({
			singleSelect:true,
			url:"client_names",
			method:"get",
			collapsible:true, //可折叠
			closable:true,	//可关闭，继承panel面板属性
			nowrap:false,
		});
		dg.datagrid('enableFilter',[{
			field:"itemid",
			type:"numberbox",
			op:['equal','notequal','less','greater']
		}]);
	});

</script>-->
</head>
<body>
	<div id="tab-tools">
		<div title="台账查询">
			<div style="padding: 20px 20px 10px;">
				<form class="form-inline" accept-charset="utf8" action="/tzquery" method="get" target="_blank">
			  		<div class="form-group">
						<select class="form-control" name="area" style="width:140px;">
					 		<option value="01">传输值班台账</option>
							<option value="02">客户评价表&挂名网络经理</option>
							<option value="03">波分台账</option>
							<option value="04">其它</option>
						</select>
			  		</div><!-- /form-group -->		

					<div class="form-group">
						<div class="input-group" style="width:300px;">			
			      			<input type="text" class="form-control" placeholder="Search for..." id="box1" name="key"/>
			      			<span class="input-group-btn">
			        			<input class="btn btn-primary" value="查询" type="submit" onclick="return isEmpty()"/>
			      			</span>
			    		</div><!-- /input-group -->
					</div><!-- /form-group -->
					<input type="hidden" value="1.0" name="version"/><!--版本号，方便更新-->
				</form>
			</div>

			<div style="padding: 10px 20px 10px;">
				<p class="lead">支持多关键词查询，利用*分隔。<small>例如:<font color=#00E3E3>新时空*穗园小区</font></small></p>
				<p>最近10个查询记录：</p>
				<ol id="top10record">
				</ol>
			</div>

			<div id="footer" style="padding:10px 20px 10px;bottom:0px;position:fixed">
			<!--<div id="footer">-->
				<p class="lead">台账数据库更新时间:<font color=#00E3E3>{{updatetime}}</font>。如需更新，请利用值班小工具的数据库更新功能！<a href="#" target="_blank"><span class="badge pull-right">更新指南</span></a></p>
			</div>
		</div>
		<div title="总部直管客户">
			<div id="client" style="position:absolute;padding:5px;left:600px;top:20px">
				<table id="client-210" title="210家总部直管客户名单" style="width:500px;height:250px">
					<thead>
						<tr>
							<th data-options="field:'itemid',width:60">序号</th>
							<th data-options="field:'client-name',width:200">直管客户名单(49家)</th>
							<th data-options="field:'customer-manager',width:200">大客户营销服务中心客户经理</th>
						</tr>
					</thead>
				</table>
			</div>
		</div>
		<div title="波分资源分配">
			<div id="cc" class="easyui-layout" style="width:100%;height:100%;">
				<div data-options="region:'north',split:true" style="height:70%;">
					<table id="dg_otn" style="width:100%;height:100%;"></table>
				</div>
				<div data-options="region:'west',title:'West',split:true" style="width:50%;">
					<div style="padding:10px 60px 20px 60px">
		    			<form id="ff" method="post">
			    			<table cellpadding="5">
					    		<tr>
					    			<td>A端地址:</td>
					    			<td><input class="easyui-textbox" type="text" name="atable" data-options="required:true"></input></td>
					    		</tr>
					    		<tr>
					    			<td>A端序号:</td>
					    			<td><input class="easyui-textbox" type="text" name="ano" data-options="required:true"></input></td>
					    		</tr>
					    		<tr>
					    			<td>Z端地址:</td>
					    			<td><input class="easyui-textbox" type="text" name="ztable" data-options="required:true"></input></td>
					    		</tr>
					    		<tr>
					    			<td>Z端序号:</td>
					    			<td><input class="easyui-textbox" type="text" name="zno" data-options="required:true"></input></td>
					    		</tr>
					    		<tr>
					    			<td>波分设备:</td>
					    			<td>
					    				<select class="easyui-combobox" name="vender">
					    					<option value="hw">华为</option>
					    					<option value="fh3000">烽火3000</option>
					    					<option value="fh4000">烽火4000</option>
					    					<option value="zx">中兴</option>
					    				</select>
					    			</td>
					    		</tr>
			    			</table>
			    		</form>
					    <div style="text-align:center;padding:5px">
					    	<a href="javascript:void(0)" class="easyui-linkbutton" onclick="submitForm()">Submit</a>
					    	<a href="javascript:void(0)" class="easyui-linkbutton" onclick="clearForm()">Clear</a>
					    </div>
		    		</div>
				</div>
				<div data-options="region:'center',title:'center title'" style="padding:5px;background:#eee;">
					<input class="easyui-textbox" id="output-box" data-options="multiline:true" style="word-wrap:break-word;width:100%;height:100%"/>
				</div>
			</div>
			<div id="toolbar_otn">
				<form id="otn_form">
					<!--<input type="radio" class="radio_otn" name="vender_otn" value="fh300" checked="checked" />烽火3000
					<input type="radio" class="radio_otn" name="vender_otn" value="fh4000" />烽火4000
					<input type="radio" class="radio_otn" name="vender_otn" value="hw" />华为
					<input type="radio" class="radio_otn" name="vender_otn" value="zx" />中兴-->
					<input type="hidden" name="vender_otn"/>
					<input id="jf_list" name="jf_name"/>
				</form>
			</div>
		</div>
		<div title="全流程系统">
		    <div id="silverlightControlHost" style="height:100%;width:100%;">
		        <object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%">
				  <param name="source" value="/static/全流程工单.xap"/>
				  <param name="onError" value="onSilverlightError" />
				  <param name="background" value="white" />
				  <param name="minRuntimeVersion" value="5.0.61118.0" />
				  <param name="autoUpgrade" value="true" />
				  <a href="http://go.microsoft.com/fwlink/?LinkID=149156&v=5.0.61118.0" style="text-decoration:none">
		 			  <img src="http://go.microsoft.com/fwlink/?LinkId=161376" alt="获取 Microsoft Silverlight" style="border-style:none"/>
				  </a>
			    </object>
			    <iframe id="_sl_historyFrame" style="visibility:hidden;height:0px;width:0px;border:0px"></iframe>
			</div>
		</div>
		<div title="波分环路表">
			<table id="dg" style="width:100%;height:100%;"></table>
			<div id="toolbar">
				<input type="radio" class="radioItem" name="vender" value="fhr" checked="checked" />烽火 
				<input type="radio" class="radioItem" name="vender" value="hwr" />华为
				<input type="radio" class="radioItem" name="vender" value="zxr" />中兴
				<a href="#" class="easyui-linkbutton" iconCls="icon-add" plain="true" onclick="newUser()">New User</a>
				<a href="#" class="easyui-linkbutton" iconCls="icon-edit" plain="true" onclick="editUser()">Edit User</a>
				<a href="#" class="easyui-linkbutton" iconCls="icon-remove" plain="true" onclick="destroyUser()">Remove User</a>
			</div>

			<div id="dlg" class="easyui-dialog" style="width:400px;height:280px;padding:10px 20px" closed="true" buttons="#dlg-buttons">
				<div class="ftitle">User Information</div>
				<form id="fm" method="post">

					<div class="fitem">
						<label>First Name:</label>
						<input name="firstname" class="easyui-validatebox" required="true">
					</div>
					<div class="fitem">
						<label>Last Name:</label>
						<input name="lastname" class="easyui-validatebox" required="true">
					</div>
					<div class="fitem">
						<label>Phone:</label>
						<input name="phone">
					</div>
					<div class="fitem">
						<label>Email:</label>
						<input name="email" class="easyui-validatebox" validType="email">
					</div>
				</form>
			</div>
			<div id="dlg-buttons">
				<a href="#" class="easyui-linkbutton" iconCls="icon-ok" onclick="saveUser()">Save</a>
				<a href="#" class="easyui-linkbutton" iconCls="icon-cancel" onclick="javascript:$('#dlg').dialog('close')">Cancel</a>
			</div>
		</div>
	</div>
</body>
<script type="text/javascript" src="static/js/main.js"></script>
<script>
	function submitForm(){
		$('#ff').form('submit',{
			url:'otn/dispatch',
			onSubmit:function(){
				return $(this).form('enableValidation').form('validate');	// return false will stop the form submission
			},
			success:function(data){
				//alert(data);
				$('#output-box').textbox('setText',data);	//资源分配的输出框
			}
		});
	}
	function clearForm(){
		$('#ff').form('clear');
	}
	function newUser(){
		$('#dlg').dialog('open').dialog('setTitle','New User');
		$('#fm').form('clear');
		url = 'save_user.php';
	}

	function editUser(){
		var row = $('#dg').datagrid('getSelected');
		if (row){
			$('#dlg').dialog('open').dialog('setTitle','Edit User');
			$('#fm').form('load',row);
			url = 'update_user.php?id='+row.id;
		}
	}

	function submit_otnform(){
		$('#otn_form').form('submit',{
			url:'otn/port',
			onSubmit:function(){
				return $(this).form('enableValidation').form('validate');	// return false will stop the form submission
			},
			success:function(data){
				//alert(JSON.parse(data));
				$('#dg_otn').datagrid('loadData',JSON.parse(data));		//需要把json数据转为数组才能使用
			}
		});
	}
	
</script>
</html>